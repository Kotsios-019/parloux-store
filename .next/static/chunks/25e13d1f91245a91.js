(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49221,e=>{"use strict";e.s(["default",()=>m],49221);var t=e.i(43476),n=e.i(71645),a=e.i(46932),s=e.i(16715),r=e.i(69638),d=e.i(63209),i=e.i(52571),l=e.i(47167),o=e.i(99749);class c{async fetchProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0,n=await this.makeRequest("\n      query getProducts($first: Int!, $after: String) {\n        products(first: $first, after: $after) {\n          edges {\n            node {\n              id\n              title\n              handle\n              description\n              productType\n              vendor\n              tags\n              createdAt\n              updatedAt\n              images(first: 10) {\n                edges {\n                  node {\n                    id\n                    url\n                    altText\n                  }\n                }\n              }\n              variants(first: 100) {\n                edges {\n                  node {\n                    id\n                    title\n                    price {\n                      amount\n                      currencyCode\n                    }\n                    compareAtPrice {\n                      amount\n                      currencyCode\n                    }\n                    availableForSale\n                    selectedOptions {\n                      name\n                      value\n                    }\n                  }\n                }\n              }\n              featuredImage {\n                url\n                altText\n              }\n            }\n          }\n          pageInfo {\n            hasNextPage\n            endCursor\n          }\n        }\n      }\n    ",{first:e,after:t});return{products:n.data.products.edges.map(e=>this.transformProduct(e.node)),hasNextPage:n.data.products.pageInfo.hasNextPage,endCursor:n.data.products.pageInfo.endCursor}}async fetchCollections(){return(await this.makeRequest("\n      query getCollections {\n        collections(first: 50) {\n          edges {\n            node {\n              id\n              title\n              handle\n              description\n              image {\n                url\n                altText\n              }\n              productsCount\n              sortOrder\n              templateSuffix\n              updatedAt\n              products(first: 20) {\n                edges {\n                  node {\n                    id\n                    title\n                    handle\n                    featuredImage {\n                      url\n                      altText\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    ")).data.collections.edges.map(e=>this.transformCollection(e.node))}async fetchFeaturedCollections(){return(await this.makeRequest('\n      query getFeaturedCollections {\n        collections(first: 50) {\n          edges {\n            node {\n              id\n              title\n              handle\n              description\n              image {\n                url\n                altText\n              }\n              metafields(first: 10, namespace: "custom") {\n                edges {\n                  node {\n                    key\n                    value\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    ')).data.collections.edges.map(e=>this.transformCollection(e.node)).filter(e=>{var t;return null==(t=e.metafields)?void 0:t.some(e=>"featured"===e.key&&"true"===e.value)})}async fetchProductsByCollection(e){return(await this.makeRequest("\n      query getCollectionProducts($handle: String!) {\n        collection(handle: $handle) {\n          products(first: 50) {\n            edges {\n              node {\n                id\n                title\n                handle\n                description\n                productType\n                vendor\n                tags\n                images(first: 10) {\n                  edges {\n                    node {\n                      id\n                      url\n                      altText\n                    }\n                  }\n                }\n                variants(first: 100) {\n                  edges {\n                    node {\n                      id\n                      title\n                      price {\n                        amount\n                        currencyCode\n                      }\n                      compareAtPrice {\n                        amount\n                        currencyCode\n                      }\n                      availableForSale\n                      selectedOptions {\n                        name\n                        value\n                      }\n                    }\n                  }\n                }\n                featuredImage {\n                  url\n                  altText\n                }\n              }\n            }\n          }\n        }\n      }\n    ",{handle:e})).data.collection.products.edges.map(e=>this.transformProduct(e.node))}async searchProducts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await this.makeRequest("\n      query searchProducts($query: String!, $first: Int!) {\n        products(first: $first, query: $query) {\n          edges {\n            node {\n              id\n              title\n              handle\n              description\n              productType\n              vendor\n              tags\n              images(first: 5) {\n                edges {\n                  node {\n                    id\n                    url\n                    altText\n                  }\n                }\n              }\n              variants(first: 10) {\n                edges {\n                  node {\n                    id\n                    title\n                    price {\n                      amount\n                      currencyCode\n                    }\n                    compareAtPrice {\n                      amount\n                      currencyCode\n                    }\n                    availableForSale\n                    selectedOptions {\n                      name\n                      value\n                    }\n                  }\n                }\n              }\n              featuredImage {\n                url\n                altText\n              }\n            }\n          }\n        }\n      }\n    ",{query:e,first:t})).data.products.edges.map(e=>this.transformProduct(e.node))}async updateCollectionMetafield(e,t,n){await this.makeRequest("\n      mutation updateCollectionMetafield($input: CollectionInput!) {\n        collectionUpdate(input: $input) {\n          collection {\n            id\n          }\n          userErrors {\n            field\n            message\n          }\n        }\n      }\n    ",{input:{id:e,metafields:[{namespace:"custom",key:t,value:n,type:"single_line_text_field"}]}})}transformProduct(e){return{id:e.id,title:e.title,handle:e.handle,description:e.description,images:e.images.edges.map(e=>({id:e.node.id,url:e.node.url,altText:e.node.altText})),variants:e.variants.edges.map(e=>{var t;return{id:e.node.id,title:e.node.title,price:e.node.price.amount,compareAtPrice:null==(t=e.node.compareAtPrice)?void 0:t.amount,availableForSale:e.node.availableForSale,selectedOptions:e.node.selectedOptions}}),tags:e.tags,productType:e.productType,vendor:e.vendor,createdAt:e.createdAt,updatedAt:e.updatedAt,featuredImage:e.featuredImage}}transformCollection(e){var t;return{id:e.id,title:e.title,handle:e.handle,description:e.description,image:e.image,products:(null==(t=e.products)?void 0:t.edges.map(e=>this.transformProduct(e.node)))||[],productsCount:e.productsCount,sortOrder:e.sortOrder,templateSuffix:e.templateSuffix,updatedAt:e.updatedAt}}async makeRequest(e,t){let n=await fetch("".concat(this.adminApiUrl,"/admin/api/2024-01/graphql.json"),{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Access-Token":this.accessToken},body:JSON.stringify({query:e,variables:t})});if(!n.ok)throw Error("Shopify API error: ".concat(n.statusText));let a=await n.json();if(a.errors)throw Error("GraphQL errors: ".concat(JSON.stringify(a.errors)));return a}constructor(e,t){(0,o._)(this,"adminApiUrl",void 0),(0,o._)(this,"accessToken",void 0),this.adminApiUrl=e,this.accessToken=t}}var x=e.i(70162);function m(){let[e,o]=(0,n.useState)(null),[m,u]=(0,n.useState)(!1),{products:h,loading:p,error:f}=function(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[r,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{s(!0);let e=new c(l.default.env.NEXT_PUBLIC_SHOPIFY_DOMAIN,l.default.env.SHOPIFY_ADMIN_ACCESS_TOKEN),n=await e.fetchProducts();t(n.products)}catch(e){d(e instanceof Error?e.message:"Failed to fetch products")}finally{s(!1)}})()},[]),{products:e,loading:a,error:r}}(),{collections:g,loading:y,error:j}=function(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[r,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{s(!0);let e=new c(l.default.env.NEXT_PUBLIC_SHOPIFY_DOMAIN,l.default.env.SHOPIFY_ADMIN_ACCESS_TOKEN),n=await e.fetchCollections();t(n)}catch(e){d(e instanceof Error?e.message:"Failed to fetch collections")}finally{s(!1)}})()},[]),{collections:e,loading:a,error:r}}(),{featuredCollections:v,loading:N,error:k}=function(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[r,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{s(!0);let e=new c(l.default.env.NEXT_PUBLIC_SHOPIFY_DOMAIN,l.default.env.SHOPIFY_ADMIN_ACCESS_TOKEN),n=await e.fetchFeaturedCollections();t(n)}catch(e){d(e instanceof Error?e.message:"Failed to fetch featured collections")}finally{s(!1)}})()},[]),{featuredCollections:e,loading:a,error:r}}(),b=async()=>{u(!0),await new Promise(e=>setTimeout(e,2e3)),o(new Date),u(!1)};return(0,t.jsx)(x.default,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-champagne-nude/30 to-elegant-base/30 dark:from-champagne-nude/20 dark:to-elegant-base/20 py-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-cormorant font-bold text-deep-black dark:text-ivory-white mb-4",children:"Shopify Integration Demo"}),(0,t.jsx)("p",{className:"text-lg text-font-secondary dark:text-font-secondary-dark font-josefin max-w-2xl mx-auto",children:"Real-time data synchronization with Shopify Admin API"}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-center space-x-4",children:[(0,t.jsxs)("button",{onClick:b,disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-soft-gold text-deep-black rounded-lg hover:bg-bright-gold transition-colors disabled:opacity-50",children:[(0,t.jsx)(s.RefreshCw,{className:"w-4 h-4 ".concat(m?"animate-spin":"")}),(0,t.jsx)("span",{children:"Refresh Data"})]}),e&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-font-secondary dark:text-font-secondary-dark",children:[(0,t.jsx)(r.CheckCircle,{className:"w-4 h-4 text-green-500"}),(0,t.jsxs)("span",{children:["Last updated: ",e.toLocaleTimeString()]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white dark:bg-deep-black rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(p?"bg-yellow-500":f?"bg-red-500":"bg-green-500")}),(0,t.jsx)("h2",{className:"text-xl font-cormorant font-bold text-deep-black dark:text-ivory-white",children:"Products"})]}),p?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(s.RefreshCw,{className:"w-4 h-4 animate-spin text-soft-gold"}),(0,t.jsx)("span",{className:"text-font-secondary dark:text-font-secondary-dark",children:"Loading..."})]}):f?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.AlertCircle,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{className:"text-red-600 dark:text-red-400",children:f})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl font-josefin font-bold text-soft-gold",children:h.length}),(0,t.jsx)("div",{className:"text-sm text-font-secondary dark:text-font-secondary-dark",children:"Products synced from Shopify"}),(0,t.jsx)("div",{className:"text-xs text-font-secondary dark:text-font-secondary-dark",children:"Updates automatically via webhooks"})]})]}),(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-white dark:bg-deep-black rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(y?"bg-yellow-500":j?"bg-red-500":"bg-green-500")}),(0,t.jsx)("h2",{className:"text-xl font-cormorant font-bold text-deep-black dark:text-ivory-white",children:"Collections"})]}),y?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(s.RefreshCw,{className:"w-4 h-4 animate-spin text-soft-gold"}),(0,t.jsx)("span",{className:"text-font-secondary dark:text-font-secondary-dark",children:"Loading..."})]}):j?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.AlertCircle,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{className:"text-red-600 dark:text-red-400",children:j})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl font-josefin font-bold text-soft-gold",children:g.length}),(0,t.jsx)("div",{className:"text-sm text-font-secondary dark:text-font-secondary-dark",children:"Collections synced from Shopify"}),(0,t.jsx)("div",{className:"text-xs text-font-secondary dark:text-font-secondary-dark",children:"Featured collections auto-update"})]})]}),(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white dark:bg-deep-black rounded-lg shadow-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(N?"bg-yellow-500":k?"bg-red-500":"bg-green-500")}),(0,t.jsx)("h2",{className:"text-xl font-cormorant font-bold text-deep-black dark:text-ivory-white",children:"Featured"})]}),N?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(s.RefreshCw,{className:"w-4 h-4 animate-spin text-soft-gold"}),(0,t.jsx)("span",{className:"text-font-secondary dark:text-font-secondary-dark",children:"Loading..."})]}):k?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.AlertCircle,{className:"w-4 h-4 text-red-500"}),(0,t.jsx)("span",{className:"text-red-600 dark:text-red-400",children:k})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl font-josefin font-bold text-soft-gold",children:v.length}),(0,t.jsx)("div",{className:"text-sm text-font-secondary dark:text-font-secondary-dark",children:"Featured collections"}),(0,t.jsx)("div",{className:"text-xs text-font-secondary dark:text-font-secondary-dark",children:"Controlled by metafields"})]})]})]}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mt-12",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-deep-black rounded-lg shadow-lg p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-cormorant font-bold text-deep-black dark:text-ivory-white mb-6",children:"Automatic Updates"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,t.jsx)("h3",{className:"text-lg font-cormorant font-semibold text-deep-black dark:text-ivory-white",children:"Products"})]}),(0,t.jsxs)("ul",{className:"text-sm text-font-secondary dark:text-font-secondary-dark space-y-1",children:[(0,t.jsx)("li",{children:"• New products auto-appear"}),(0,t.jsx)("li",{children:"• Updates reflect immediately"}),(0,t.jsx)("li",{children:"• Deleted products removed"}),(0,t.jsx)("li",{children:"• Inventory syncs real-time"}),(0,t.jsx)("li",{children:"• Price changes update instantly"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,t.jsx)("h3",{className:"text-lg font-cormorant font-semibold text-deep-black dark:text-ivory-white",children:"Collections"})]}),(0,t.jsxs)("ul",{className:"text-sm text-font-secondary dark:text-font-secondary-dark space-y-1",children:[(0,t.jsx)("li",{children:"• New collections auto-create"}),(0,t.jsx)("li",{children:"• Featured status via metafields"}),(0,t.jsx)("li",{children:"• Product assignments sync"}),(0,t.jsx)("li",{children:"• Collection images update"}),(0,t.jsx)("li",{children:"• Sort order maintained"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.CheckCircle,{className:"w-5 h-5 text-green-500"}),(0,t.jsx)("h3",{className:"text-lg font-cormorant font-semibold text-deep-black dark:text-ivory-white",children:"Content"})]}),(0,t.jsxs)("ul",{className:"text-sm text-font-secondary dark:text-font-secondary-dark space-y-1",children:[(0,t.jsx)("li",{children:"• Descriptions auto-update"}),(0,t.jsx)("li",{children:"• Images sync from Shopify"}),(0,t.jsx)("li",{children:"• Tags create categories"}),(0,t.jsx)("li",{children:"• SEO data maintained"}),(0,t.jsx)("li",{children:"• Search index updates"})]})]})]})]})}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"mt-8",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-deep-black rounded-lg shadow-lg p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-cormorant font-bold text-deep-black dark:text-ivory-white mb-6",children:"Webhook Configuration"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(i.Info,{className:"w-5 h-5 text-blue-500"}),(0,t.jsxs)("span",{className:"text-font-secondary dark:text-font-secondary-dark",children:["Webhook URL: ",(0,t.jsx)("code",{className:"bg-elegant-base/20 px-2 py-1 rounded",children:"https://yourdomain.com/api/webhooks/shopify"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-josefin font-semibold text-green-800 dark:text-green-200",children:"Products"}),(0,t.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400",children:"create/update/delete"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-josefin font-semibold text-blue-800 dark:text-blue-200",children:"Collections"}),(0,t.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"create/update/delete"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-josefin font-semibold text-purple-800 dark:text-purple-200",children:"Orders"}),(0,t.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400",children:"create/update/paid"})]}),(0,t.jsxs)("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[(0,t.jsx)("div",{className:"text-sm font-josefin font-semibold text-orange-800 dark:text-orange-200",children:"Inventory"}),(0,t.jsx)("div",{className:"text-xs text-orange-600 dark:text-orange-400",children:"real-time sync"})]})]})]})]})})]})})})}}]);