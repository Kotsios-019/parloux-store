{"version":3,"sources":["turbopack:///[project]/node_modules/@shopify/storefront-api-client/src/constants.ts","turbopack:///[project]/node_modules/@shopify/graphql-client/src/graphql-client/constants.ts","turbopack:///[project]/node_modules/@shopify/graphql-client/src/api-client-utilities/utilities.ts","turbopack:///[project]/node_modules/@shopify/graphql-client/src/api-client-utilities/api-versions.ts","turbopack:///[project]/node_modules/@shopify/graphql-client/src/api-client-utilities/validations.ts","turbopack:///[project]/node_modules/@shopify/storefront-api-client/src/validations.ts","turbopack:///[project]/node_modules/@shopify/graphql-client/src/graphql-client/utilities.ts","turbopack:///[project]/src/lib/shopify.ts","turbopack:///[project]/node_modules/@shopify/graphql-client/src/graphql-client/http-fetch.ts","turbopack:///[project]/node_modules/@shopify/storefront-api-client/src/storefront-api-client.ts","turbopack:///[project]/node_modules/@shopify/graphql-client/src/graphql-client/graphql-client.ts","turbopack:///[project]/src/app/api/auth/register/route.ts","turbopack:///[project]/node_modules/next/dist/esm/build/templates/app-route.js"],"sourcesContent":["export const DEFAULT_CONTENT_TYPE = 'application/json';\nexport const DEFAULT_SDK_VARIANT = 'storefront-api-client';\n// This is value is replaced with package.json version during rollup build process\nexport const DEFAULT_CLIENT_VERSION = 'ROLLUP_REPLACE_CLIENT_VERSION';\n\nexport const PUBLIC_ACCESS_TOKEN_HEADER = 'X-Shopify-Storefront-Access-Token';\nexport const PRIVATE_ACCESS_TOKEN_HEADER = 'Shopify-Storefront-Private-Token';\nexport const SDK_VARIANT_HEADER = 'X-SDK-Variant';\nexport const SDK_VERSION_HEADER = 'X-SDK-Version';\nexport const SDK_VARIANT_SOURCE_HEADER = 'X-SDK-Variant-Source';\n\nexport const CLIENT = 'Storefront API Client';\n","export const CLIENT = 'GraphQL Client';\nexport const MIN_RETRIES = 0;\nexport const MAX_RETRIES = 3;\n\nexport const GQL_API_ERROR =\n  \"An error occurred while fetching from the API. Review 'graphQLErrors' for details.\";\nexport const UNEXPECTED_CONTENT_TYPE_ERROR =\n  'Response returned unexpected Content-Type:';\nexport const NO_DATA_OR_ERRORS_ERROR =\n  'An unknown error has occurred. The API did not return a data object or any errors in its response.';\n\nexport const CONTENT_TYPES = {\n  json: 'application/json',\n  multipart: 'multipart/mixed',\n};\nexport const SDK_VARIANT_HEADER = 'X-SDK-Variant';\nexport const SDK_VERSION_HEADER = 'X-SDK-Version';\n\nexport const DEFAULT_SDK_VARIANT = 'shopify-graphql-client';\n// This is value is replaced with package.json version during rollup build process\nexport const DEFAULT_CLIENT_VERSION = 'ROLLUP_REPLACE_CLIENT_VERSION';\n\nexport const RETRY_WAIT_TIME = 1000;\nexport const RETRIABLE_STATUS_CODES = [429, 503];\nexport const DEFER_OPERATION_REGEX = /@(defer)\\b/i;\nexport const NEWLINE_SEPARATOR = '\\r\\n';\nexport const BOUNDARY_HEADER_REGEX = /boundary=\"?([^=\";]+)\"?/i;\nexport const HEADER_SEPARATOR = NEWLINE_SEPARATOR + NEWLINE_SEPARATOR;\n","import {RequestParams} from '../graphql-client/types';\n\nimport {\n  AllOperations,\n  ApiClient,\n  ApiClientConfig,\n  ApiClientRequestOptions,\n} from './types';\n\nexport function generateGetHeaders(\n  config: ApiClientConfig,\n): ApiClient['getHeaders'] {\n  return (customHeaders) => {\n    return {...(customHeaders ?? {}), ...config.headers};\n  };\n}\n\nexport function generateGetGQLClientParams<\n  Operations extends AllOperations = AllOperations,\n>({getHeaders, getApiUrl}: Pick<ApiClient, 'getHeaders' | 'getApiUrl'>) {\n  return <Operation extends keyof Operations>(\n    operation: Operation,\n    options?: ApiClientRequestOptions<Operation, Operations>,\n  ): RequestParams => {\n    const props: RequestParams = [operation as string];\n\n    if (options && Object.keys(options).length > 0) {\n      const {\n        variables,\n        apiVersion: propApiVersion,\n        headers,\n        retries,\n        signal,\n      } = options as any;\n\n      props.push({\n        ...(variables ? {variables} : {}),\n        ...(headers ? {headers: getHeaders(headers)} : {}),\n        ...(propApiVersion ? {url: getApiUrl(propApiVersion)} : {}),\n        ...(retries ? {retries} : {}),\n        ...(signal ? {signal} : {}),\n      });\n    }\n\n    return props;\n  };\n}\n","function getQuarterMonth(quarter: number) {\n  const month = quarter * 3 - 2;\n  return month === 10 ? month : `0${month}`;\n}\n\nfunction getPrevousVersion(year: number, quarter: number, nQuarter: number) {\n  const versionQuarter = quarter - nQuarter;\n\n  if (versionQuarter <= 0) {\n    return `${year - 1}-${getQuarterMonth(versionQuarter + 4)}`;\n  }\n\n  return `${year}-${getQuarterMonth(versionQuarter)}`;\n}\n\nexport function getCurrentApiVersion() {\n  const date = new Date();\n  const month = date.getUTCMonth();\n  const year = date.getUTCFullYear();\n\n  const quarter = Math.floor(month / 3 + 1);\n\n  return {\n    year,\n    quarter,\n    version: `${year}-${getQuarterMonth(quarter)}`,\n  };\n}\n\nexport function getCurrentSupportedApiVersions() {\n  const {year, quarter, version: currentVersion} = getCurrentApiVersion();\n\n  const nextVersion =\n    quarter === 4\n      ? `${year + 1}-01`\n      : `${year}-${getQuarterMonth(quarter + 1)}`;\n\n  return [\n    getPrevousVersion(year, quarter, 3),\n    getPrevousVersion(year, quarter, 2),\n    getPrevousVersion(year, quarter, 1),\n    currentVersion,\n    nextVersion,\n    'unstable',\n  ];\n}\n","import {ApiClientLogger} from './types';\n\nexport function validateDomainAndGetStoreUrl({\n  client,\n  storeDomain,\n}: {\n  client: string;\n  storeDomain: string | undefined;\n}) {\n  try {\n    if (!storeDomain || typeof storeDomain !== 'string') {\n      throw new Error();\n    }\n\n    const trimmedDomain = storeDomain.trim();\n\n    const protocolUrl = trimmedDomain.match(/^https?:/)\n      ? trimmedDomain\n      : `https://${trimmedDomain}`;\n\n    const url = new URL(protocolUrl);\n    url.protocol = 'https';\n\n    return url.origin;\n  } catch (error) {\n    throw new Error(\n      `${client}: a valid store domain (\"${storeDomain}\") must be provided`,\n      {cause: error},\n    );\n  }\n}\n\nexport function validateApiVersion({\n  client,\n  currentSupportedApiVersions,\n  apiVersion,\n  logger,\n}: {\n  client: string;\n  currentSupportedApiVersions: string[];\n  apiVersion: string;\n  logger?: ApiClientLogger;\n}) {\n  const versionError = `${client}: the provided apiVersion (\"${apiVersion}\")`;\n  const supportedVersion = `Currently supported API versions: ${currentSupportedApiVersions.join(\n    ', ',\n  )}`;\n\n  if (!apiVersion || typeof apiVersion !== 'string') {\n    throw new Error(`${versionError} is invalid. ${supportedVersion}`);\n  }\n\n  const trimmedApiVersion = apiVersion.trim();\n\n  if (!currentSupportedApiVersions.includes(trimmedApiVersion)) {\n    if (logger) {\n      logger({\n        type: 'Unsupported_Api_Version',\n        content: {\n          apiVersion,\n          supportedApiVersions: currentSupportedApiVersions,\n        },\n      });\n    } else {\n      console.warn(\n        `${versionError} is likely deprecated or not supported. ${supportedVersion}`,\n      );\n    }\n  }\n}\n","import {CLIENT} from './constants';\n\nexport function validatePrivateAccessTokenUsage(\n  privateAccessToken: string | undefined,\n) {\n  if (privateAccessToken && typeof window !== 'undefined') {\n    throw new Error(\n      `${CLIENT}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`,\n    );\n  }\n}\n\nexport function validateRequiredAccessTokens(\n  publicAccessToken: string | undefined,\n  privateAccessToken: string | undefined,\n) {\n  if (!publicAccessToken && !privateAccessToken) {\n    throw new Error(\n      `${CLIENT}: a public or private access token must be provided`,\n    );\n  }\n\n  if (publicAccessToken && privateAccessToken) {\n    throw new Error(\n      `${CLIENT}: only provide either a public or private access token`,\n    );\n  }\n}\n","import {CLIENT, MAX_RETRIES, MIN_RETRIES} from './constants';\n\nexport function formatErrorMessage(message: string, client = CLIENT) {\n  return message.startsWith(`${client}`) ? message : `${client}: ${message}`;\n}\n\nexport function getErrorMessage(error: any) {\n  return error instanceof Error ? error.message : JSON.stringify(error);\n}\n\nexport function getErrorCause(error: any): Record<string, any> | undefined {\n  return error instanceof Error && error.cause ? error.cause : undefined;\n}\n\nexport function combineErrors(dataArray: Record<string, any>[]) {\n  return dataArray.flatMap(({errors}) => {\n    return errors ?? [];\n  });\n}\n\nexport function validateRetries({\n  client,\n  retries,\n}: {\n  client: string;\n  retries?: number;\n}) {\n  if (\n    retries !== undefined &&\n    (typeof retries !== 'number' ||\n      retries < MIN_RETRIES ||\n      retries > MAX_RETRIES)\n  ) {\n    throw new Error(\n      `${client}: The provided \"retries\" value (${retries}) is invalid - it cannot be less than ${MIN_RETRIES} or greater than ${MAX_RETRIES}`,\n    );\n  }\n}\n\nexport function getKeyValueIfValid(key: string, value?: any) {\n  return value &&\n    (typeof value !== 'object' ||\n      Array.isArray(value) ||\n      (typeof value === 'object' && Object.keys(value).length > 0))\n    ? {[key]: value}\n    : {};\n}\n\nexport function buildDataObjectByPath(\n  path: string[],\n  data: any,\n): Record<string | number, any> {\n  if (path.length === 0) {\n    return data;\n  }\n\n  const key = path.pop() as string | number;\n  const newData = {\n    [key]: data,\n  };\n\n  if (path.length === 0) {\n    return newData;\n  }\n\n  return buildDataObjectByPath(path, newData);\n}\n\nfunction combineObjects(baseObject: any, newObject: any) {\n  return Object.keys(newObject || {}).reduce(\n    (acc: any, key: string | number) => {\n      if (\n        (typeof newObject[key] === 'object' || Array.isArray(newObject[key])) &&\n        baseObject[key]\n      ) {\n        acc[key] = combineObjects(baseObject[key], newObject[key]);\n        return acc;\n      }\n\n      acc[key] = newObject[key];\n      return acc;\n    },\n    Array.isArray(baseObject) ? [...baseObject] : {...baseObject},\n  );\n}\n\nexport function buildCombinedDataObject([\n  initialDatum,\n  ...remainingData\n]: any[]) {\n  return remainingData.reduce(combineObjects, {...initialDatum});\n}\n","import { createStorefrontApiClient } from '@shopify/storefront-api-client';\n\n// Shopify API configuration\nexport const SHOPIFY_CONFIG = {\n  shopDomain: process.env.SHOPIFY_SHOP_DOMAIN || 'parloux-store-2.myshopify.com',\n  storefrontAccessToken: process.env.SHOPIFY_STOREFRONT_ACCESS_TOKEN || '33b7d52840ee4b3bc693ba3b08a76cc4',\n  // Remove admin token requirement for now\n  apiVersion: '2024-01',\n};\n\n// Initialize Shopify client\nconst shopifyClient = createStorefrontApiClient({\n  storeDomain: SHOPIFY_CONFIG.shopDomain,\n  apiVersion: SHOPIFY_CONFIG.apiVersion,\n  publicAccessToken: SHOPIFY_CONFIG.storefrontAccessToken,\n});\n\n// API endpoints\nexport const SHOPIFY_ENDPOINTS = {\n  storefront: `https://${SHOPIFY_CONFIG.shopDomain}/api/${SHOPIFY_CONFIG.apiVersion}/graphql.json`,\n};\n\n// GraphQL queries for customer operations\nexport const CUSTOMER_QUERIES = {\n  // Customer login mutation\n  customerAccessTokenCreate: `\n    mutation customerAccessTokenCreate($input: CustomerAccessTokenCreateInput!) {\n      customerAccessTokenCreate(input: $input) {\n        customerAccessToken {\n          accessToken\n          expiresAt\n        }\n        customerUserErrors {\n          field\n          message\n        }\n      }\n    }\n  `,\n\n  // Get customer data\n  customer: `\n    query customer($customerAccessToken: String!) {\n      customer(customerAccessToken: $customerAccessToken) {\n        id\n        email\n        firstName\n        lastName\n        phone\n        acceptsMarketing\n        createdAt\n        updatedAt\n        defaultAddress {\n          id\n          firstName\n          lastName\n          company\n          address1\n          address2\n          city\n          province\n          country\n          zip\n          phone\n        }\n      }\n    }\n  `,\n\n  // Customer registration mutation\n  customerCreate: `\n    mutation customerCreate($input: CustomerCreateInput!) {\n      customerCreate(input: $input) {\n        customer {\n          id\n          email\n          firstName\n          lastName\n          phone\n          acceptsMarketing\n          createdAt\n        }\n        customerUserErrors {\n          field\n          message\n        }\n      }\n    }\n  `,\n\n  // Customer update mutation\n  customerUpdate: `\n    mutation customerUpdate($customerAccessToken: String!, $customer: CustomerUpdateInput!) {\n      customerUpdate(customerAccessToken: $customerAccessToken, customer: $customer) {\n        customer {\n          id\n          email\n          firstName\n          lastName\n          phone\n          acceptsMarketing\n          updatedAt\n        }\n        customerUserErrors {\n          field\n          message\n        }\n      }\n    }\n  `,\n\n  // Password reset mutation\n  customerRecover: `\n    mutation customerRecover($email: String!) {\n      customerRecover(email: $email) {\n        customerUserErrors {\n          field\n          message\n        }\n      }\n    }\n  `,\n\n  // Get customer orders\n  customerOrders: `\n    query customerOrders($customerAccessToken: String!, $first: Int!) {\n      customer(customerAccessToken: $customerAccessToken) {\n        orders(first: $first) {\n          edges {\n            node {\n              id\n              orderNumber\n              processedAt\n              totalPrice {\n                amount\n                currencyCode\n              }\n              fulfillmentStatus\n              financialStatus\n              lineItems(first: 10) {\n                edges {\n                  node {\n                    title\n                    quantity\n                    variant {\n                      title\n                      image {\n                        url\n                        altText\n                      }\n                    }\n                    originalTotalPrice {\n                      amount\n                      currencyCode\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  `,\n};\n\n// Helper function to make GraphQL requests using the official Shopify client\nexport async function shopifyRequest(query: string, variables: any = {}) {\n  console.log('Shopify API Debug:');\n  console.log('Shop Domain:', SHOPIFY_CONFIG.shopDomain);\n  console.log('Token:', SHOPIFY_CONFIG.storefrontAccessToken ? `SET (${SHOPIFY_CONFIG.storefrontAccessToken.substring(0, 8)}...)` : 'NOT SET');\n  \n  try {\n    const response = await shopifyClient.request(query, { variables });\n    return response;\n  } catch (error: any) {\n    console.error('Shopify API Error:', error);\n    throw new Error(`Shopify API error: ${error.message}`);\n  }\n}","import {CLIENT, RETRIABLE_STATUS_CODES, RETRY_WAIT_TIME} from './constants';\nimport {CustomFetchApi, GraphQLClient, Logger} from './types';\nimport {formatErrorMessage, getErrorMessage} from './utilities';\n\ninterface GenerateHttpFetchOptions {\n  clientLogger: Logger;\n  customFetchApi?: CustomFetchApi;\n  client?: string;\n  defaultRetryWaitTime?: number;\n  retriableCodes?: number[];\n}\n\nexport function generateHttpFetch({\n  clientLogger,\n  customFetchApi = fetch,\n  client = CLIENT,\n  defaultRetryWaitTime = RETRY_WAIT_TIME,\n  retriableCodes = RETRIABLE_STATUS_CODES,\n}: GenerateHttpFetchOptions) {\n  const httpFetch = async (\n    requestParams: Parameters<CustomFetchApi>,\n    count: number,\n    maxRetries: number,\n  ): ReturnType<GraphQLClient['fetch']> => {\n    const nextCount = count + 1;\n    const maxTries = maxRetries + 1;\n    let response: Response | undefined;\n\n    try {\n      response = await customFetchApi(...requestParams);\n\n      clientLogger({\n        type: 'HTTP-Response',\n        content: {\n          requestParams,\n          response,\n        },\n      });\n\n      if (\n        !response.ok &&\n        retriableCodes.includes(response.status) &&\n        nextCount <= maxTries\n      ) {\n        throw new Error();\n      }\n\n      const deprecationNotice =\n        response?.headers.get('X-Shopify-API-Deprecated-Reason') || '';\n      if (deprecationNotice) {\n        clientLogger({\n          type: 'HTTP-Response-GraphQL-Deprecation-Notice',\n          content: {\n            requestParams,\n            deprecationNotice,\n          },\n        });\n      }\n\n      return response;\n    } catch (error) {\n      if (nextCount <= maxTries) {\n        const retryAfter = response?.headers.get('Retry-After');\n        await sleep(\n          retryAfter ? parseInt(retryAfter, 10) : defaultRetryWaitTime,\n        );\n\n        clientLogger({\n          type: 'HTTP-Retry',\n          content: {\n            requestParams,\n            lastResponse: response,\n            retryAttempt: count,\n            maxRetries,\n          },\n        });\n\n        return httpFetch(requestParams, nextCount, maxRetries);\n      }\n\n      throw new Error(\n        formatErrorMessage(\n          `${\n            maxRetries > 0\n              ? `Attempted maximum number of ${maxRetries} network retries. Last message - `\n              : ''\n          }${getErrorMessage(error)}`,\n          client,\n        ),\n      );\n    }\n  };\n\n  return httpFetch;\n}\n\nasync function sleep(waitTime: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, waitTime));\n}\n","import {\n  createGraphQLClient,\n  getCurrentSupportedApiVersions,\n  validateDomainAndGetStoreUrl,\n  validateApiVersion,\n  generateGetGQLClientParams,\n  generateGetHeaders,\n} from '@shopify/graphql-client';\n\nimport {\n  StorefrontApiClientOptions,\n  StorefrontApiClient,\n  StorefrontApiClientConfig,\n  StorefrontOperations,\n} from './types';\nimport {\n  DEFAULT_SDK_VARIANT,\n  DEFAULT_CLIENT_VERSION,\n  SDK_VARIANT_HEADER,\n  SDK_VARIANT_SOURCE_HEADER,\n  SDK_VERSION_HEADER,\n  DEFAULT_CONTENT_TYPE,\n  PUBLIC_ACCESS_TOKEN_HEADER,\n  PRIVATE_ACCESS_TOKEN_HEADER,\n  CLIENT,\n} from './constants';\nimport {\n  validateRequiredAccessTokens,\n  validatePrivateAccessTokenUsage,\n} from './validations';\n\nexport function createStorefrontApiClient({\n  storeDomain,\n  apiVersion,\n  publicAccessToken,\n  privateAccessToken,\n  clientName,\n  retries = 0,\n  customFetchApi,\n  logger,\n}: StorefrontApiClientOptions): StorefrontApiClient {\n  const currentSupportedApiVersions = getCurrentSupportedApiVersions();\n\n  const storeUrl = validateDomainAndGetStoreUrl({\n    client: CLIENT,\n    storeDomain,\n  });\n\n  const baseApiVersionValidationParams = {\n    client: CLIENT,\n    currentSupportedApiVersions,\n    logger,\n  };\n\n  validateApiVersion({...baseApiVersionValidationParams, apiVersion});\n  validateRequiredAccessTokens(publicAccessToken, privateAccessToken);\n  validatePrivateAccessTokenUsage(privateAccessToken);\n\n  const apiUrlFormatter = generateApiUrlFormatter(\n    storeUrl,\n    apiVersion,\n    baseApiVersionValidationParams,\n  );\n\n  const config: StorefrontApiClientConfig = {\n    storeDomain: storeUrl,\n    apiVersion,\n    ...(publicAccessToken\n      ? {publicAccessToken}\n      : {\n          privateAccessToken: privateAccessToken!,\n        }),\n    headers: {\n      'Content-Type': DEFAULT_CONTENT_TYPE,\n      Accept: DEFAULT_CONTENT_TYPE,\n      [SDK_VARIANT_HEADER]: DEFAULT_SDK_VARIANT,\n      [SDK_VERSION_HEADER]: DEFAULT_CLIENT_VERSION,\n      ...(clientName ? {[SDK_VARIANT_SOURCE_HEADER]: clientName} : {}),\n      ...(publicAccessToken\n        ? {[PUBLIC_ACCESS_TOKEN_HEADER]: publicAccessToken}\n        : {[PRIVATE_ACCESS_TOKEN_HEADER]: privateAccessToken!}),\n    },\n    apiUrl: apiUrlFormatter(),\n    clientName,\n  };\n\n  const graphqlClient = createGraphQLClient({\n    headers: config.headers,\n    url: config.apiUrl,\n    retries,\n    customFetchApi,\n    logger,\n  });\n\n  const getHeaders = generateGetHeaders(config);\n  const getApiUrl = generateGetApiUrl(config, apiUrlFormatter);\n\n  const getGQLClientParams = generateGetGQLClientParams<StorefrontOperations>({\n    getHeaders,\n    getApiUrl,\n  });\n\n  const client: StorefrontApiClient = {\n    config,\n    getHeaders,\n    getApiUrl,\n    fetch: (...props) => {\n      return graphqlClient.fetch(...getGQLClientParams(...props));\n    },\n    request: (...props) => {\n      return graphqlClient.request(...getGQLClientParams(...props));\n    },\n    requestStream: (...props) => {\n      return graphqlClient.requestStream(...getGQLClientParams(...props));\n    },\n  };\n\n  return Object.freeze(client);\n}\n\nfunction generateApiUrlFormatter(\n  storeUrl: string,\n  defaultApiVersion: string,\n  baseApiVersionValidationParams: Omit<\n    Parameters<typeof validateApiVersion>[0],\n    'apiVersion'\n  >,\n) {\n  return (apiVersion?: string) => {\n    if (apiVersion) {\n      validateApiVersion({\n        ...baseApiVersionValidationParams,\n        apiVersion,\n      });\n    }\n\n    const urlApiVersion = (apiVersion ?? defaultApiVersion).trim();\n\n    return `${storeUrl}/api/${urlApiVersion}/graphql.json`;\n  };\n}\n\nfunction generateGetApiUrl(\n  config: StorefrontApiClientConfig,\n  apiUrlFormatter: (version?: string) => string,\n): StorefrontApiClient['getApiUrl'] {\n  return (propApiVersion?: string) => {\n    return propApiVersion ? apiUrlFormatter(propApiVersion) : config.apiUrl;\n  };\n}\n","import {generateHttpFetch} from './http-fetch';\nimport {\n  ClientOptions,\n  CustomFetchApi,\n  GraphQLClient,\n  ClientResponse,\n  ClientConfig,\n  Logger,\n  LogContentTypes,\n  DataChunk,\n} from './types';\nimport {\n  CLIENT,\n  GQL_API_ERROR,\n  UNEXPECTED_CONTENT_TYPE_ERROR,\n  NO_DATA_OR_ERRORS_ERROR,\n  CONTENT_TYPES,\n  RETRY_WAIT_TIME,\n  HEADER_SEPARATOR,\n  DEFER_OPERATION_REGEX,\n  BOUNDARY_HEADER_REGEX,\n  SDK_VARIANT_HEADER,\n  SDK_VERSION_HEADER,\n  DEFAULT_SDK_VARIANT,\n  DEFAULT_CLIENT_VERSION,\n} from './constants';\nimport {\n  formatErrorMessage,\n  getErrorMessage,\n  validateRetries,\n  getKeyValueIfValid,\n  buildDataObjectByPath,\n  buildCombinedDataObject,\n  getErrorCause,\n  combineErrors,\n} from './utilities';\n\nexport function createGraphQLClient({\n  headers,\n  url,\n  customFetchApi = fetch,\n  retries = 0,\n  logger,\n}: ClientOptions): GraphQLClient {\n  validateRetries({client: CLIENT, retries});\n\n  const config: ClientConfig = {\n    headers,\n    url,\n    retries,\n  };\n\n  const clientLogger = generateClientLogger(logger);\n  const httpFetch = generateHttpFetch({\n    customFetchApi,\n    clientLogger,\n    defaultRetryWaitTime: RETRY_WAIT_TIME,\n  });\n  const fetchFn = generateFetch(httpFetch, config);\n  const request = generateRequest(fetchFn);\n  const requestStream = generateRequestStream(fetchFn);\n\n  return {\n    config,\n    fetch: fetchFn,\n    request,\n    requestStream,\n  };\n}\n\nexport function generateClientLogger(logger?: Logger): Logger {\n  return (logContent: LogContentTypes) => {\n    if (logger) {\n      logger(logContent);\n    }\n  };\n}\n\nasync function processJSONResponse<TData = any>(\n  response: Response,\n): Promise<ClientResponse<TData>> {\n  const {errors, data, extensions} = await response.json<any>();\n\n  return {\n    ...getKeyValueIfValid('data', data),\n    ...getKeyValueIfValid('extensions', extensions),\n    headers: response.headers,\n\n    ...(errors || !data\n      ? {\n          errors: {\n            networkStatusCode: response.status,\n            message: formatErrorMessage(\n              errors ? GQL_API_ERROR : NO_DATA_OR_ERRORS_ERROR,\n            ),\n            ...getKeyValueIfValid('graphQLErrors', errors),\n            response,\n          },\n        }\n      : {}),\n  };\n}\n\nfunction generateFetch(\n  httpFetch: ReturnType<typeof generateHttpFetch>,\n  {url, headers, retries}: ClientConfig,\n): GraphQLClient['fetch'] {\n  return async (operation, options = {}) => {\n    const {\n      variables,\n      headers: overrideHeaders,\n      url: overrideUrl,\n      retries: overrideRetries,\n      keepalive,\n      signal,\n    } = options;\n\n    const body = JSON.stringify({\n      query: operation,\n      variables,\n    });\n\n    validateRetries({client: CLIENT, retries: overrideRetries});\n\n    const flatHeaders = Object.entries({\n      ...headers,\n      ...overrideHeaders,\n    }).reduce((headers: Record<string, string>, [key, value]) => {\n      headers[key] = Array.isArray(value) ? value.join(', ') : value.toString();\n      return headers;\n    }, {});\n\n    if (!flatHeaders[SDK_VARIANT_HEADER] && !flatHeaders[SDK_VERSION_HEADER]) {\n      flatHeaders[SDK_VARIANT_HEADER] = DEFAULT_SDK_VARIANT;\n      flatHeaders[SDK_VERSION_HEADER] = DEFAULT_CLIENT_VERSION;\n    }\n\n    const fetchParams: Parameters<CustomFetchApi> = [\n      overrideUrl ?? url,\n      {\n        method: 'POST',\n        headers: flatHeaders,\n        body,\n        signal,\n        keepalive,\n      },\n    ];\n\n    return httpFetch(fetchParams, 1, overrideRetries ?? retries);\n  };\n}\n\nfunction generateRequest(\n  fetchFn: ReturnType<typeof generateFetch>,\n): GraphQLClient['request'] {\n  return async (...props) => {\n    if (DEFER_OPERATION_REGEX.test(props[0])) {\n      throw new Error(\n        formatErrorMessage(\n          'This operation will result in a streamable response - use requestStream() instead.',\n        ),\n      );\n    }\n\n    let response: Response | null = null;\n    try {\n      response = await fetchFn(...props);\n      const {status, statusText} = response;\n      const contentType = response.headers.get('content-type') || '';\n\n      if (!response.ok) {\n        return {\n          errors: {\n            networkStatusCode: status,\n            message: formatErrorMessage(statusText),\n            response,\n          },\n        };\n      }\n\n      if (!contentType.includes(CONTENT_TYPES.json)) {\n        return {\n          errors: {\n            networkStatusCode: status,\n            message: formatErrorMessage(\n              `${UNEXPECTED_CONTENT_TYPE_ERROR} ${contentType}`,\n            ),\n            response,\n          },\n        };\n      }\n\n      return await processJSONResponse(response);\n    } catch (error) {\n      return {\n        errors: {\n          message: getErrorMessage(error),\n          ...(response == null\n            ? {}\n            : {\n                networkStatusCode: response.status,\n                response,\n              }),\n        },\n      };\n    }\n  };\n}\n\nasync function* getStreamBodyIterator(\n  response: Response,\n): AsyncIterableIterator<string> {\n  const decoder = new TextDecoder();\n\n  // Response body is an async iterator\n  if ((response.body as any)![Symbol.asyncIterator]) {\n    for await (const chunk of response.body! as any) {\n      yield decoder.decode(chunk);\n    }\n  } else {\n    const reader = response.body!.getReader();\n\n    let readResult: ReadableStreamReadResult<DataChunk>;\n    try {\n      while (!(readResult = await reader.read()).done) {\n        yield decoder.decode(readResult.value);\n      }\n    } finally {\n      reader.cancel();\n    }\n  }\n}\n\nfunction readStreamChunk(\n  streamBodyIterator: AsyncIterableIterator<string>,\n  boundary: string,\n) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      try {\n        let buffer = '';\n\n        for await (const textChunk of streamBodyIterator) {\n          buffer += textChunk;\n\n          if (buffer.indexOf(boundary) > -1) {\n            const lastBoundaryIndex = buffer.lastIndexOf(boundary);\n            const fullResponses = buffer.slice(0, lastBoundaryIndex);\n\n            const chunkBodies = fullResponses\n              .split(boundary)\n              .filter((chunk) => chunk.trim().length > 0)\n              .map((chunk) => {\n                const body = chunk\n                  .slice(\n                    chunk.indexOf(HEADER_SEPARATOR) + HEADER_SEPARATOR.length,\n                  )\n                  .trim();\n                return body;\n              });\n\n            if (chunkBodies.length > 0) {\n              yield chunkBodies;\n            }\n\n            buffer = buffer.slice(lastBoundaryIndex + boundary.length);\n\n            if (buffer.trim() === `--`) {\n              buffer = '';\n            }\n          }\n        }\n      } catch (error) {\n        throw new Error(\n          `Error occured while processing stream payload - ${getErrorMessage(\n            error,\n          )}`,\n        );\n      }\n    },\n  };\n}\n\nfunction createJsonResponseAsyncIterator(response: Response) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const processedResponse = await processJSONResponse(response);\n\n      yield {\n        ...processedResponse,\n        hasNext: false,\n      };\n    },\n  };\n}\n\nfunction getResponseDataFromChunkBodies(chunkBodies: string[]): {\n  data: any;\n  errors?: any;\n  extensions?: any;\n  hasNext: boolean;\n}[] {\n  return chunkBodies\n    .map((value) => {\n      try {\n        return JSON.parse(value);\n      } catch (error) {\n        throw new Error(\n          `Error in parsing multipart response - ${getErrorMessage(error)}`,\n        );\n      }\n    })\n    .map((payload) => {\n      const {data, incremental, hasNext, extensions, errors} = payload;\n\n      // initial data chunk\n      if (!incremental) {\n        return {\n          data: data || {},\n          ...getKeyValueIfValid('errors', errors),\n          ...getKeyValueIfValid('extensions', extensions),\n          hasNext,\n        };\n      }\n\n      // subsequent data chunks\n      const incrementalArray: {data: any; errors?: any}[] = incremental.map(\n        ({data, path, errors}: any) => {\n          return {\n            data: data && path ? buildDataObjectByPath(path, data) : {},\n            ...getKeyValueIfValid('errors', errors),\n          };\n        },\n      );\n\n      return {\n        data:\n          incrementalArray.length === 1\n            ? incrementalArray[0].data\n            : buildCombinedDataObject([\n                ...incrementalArray.map(({data}) => data),\n              ]),\n        ...getKeyValueIfValid('errors', combineErrors(incrementalArray)),\n        hasNext,\n      };\n    });\n}\n\nfunction validateResponseData(\n  responseErrors: any[],\n  combinedData: ReturnType<typeof buildCombinedDataObject>,\n) {\n  if (responseErrors.length > 0) {\n    throw new Error(GQL_API_ERROR, {\n      cause: {\n        graphQLErrors: responseErrors,\n      },\n    });\n  }\n\n  if (Object.keys(combinedData).length === 0) {\n    throw new Error(NO_DATA_OR_ERRORS_ERROR);\n  }\n}\n\nfunction createMultipartResponseAsyncInterator(\n  response: Response,\n  responseContentType: string,\n) {\n  const boundaryHeader = (responseContentType ?? '').match(\n    BOUNDARY_HEADER_REGEX,\n  );\n  const boundary = `--${boundaryHeader ? boundaryHeader[1] : '-'}`;\n\n  if (\n    !response.body?.getReader &&\n    !(response.body as any)?.[Symbol.asyncIterator]\n  ) {\n    throw new Error('API multipart response did not return an iterable body', {\n      cause: response,\n    });\n  }\n\n  const streamBodyIterator = getStreamBodyIterator(response);\n\n  let combinedData: Record<string, any> = {};\n  let responseExtensions: Record<string, any> | undefined;\n\n  return {\n    async *[Symbol.asyncIterator]() {\n      try {\n        let streamHasNext = true;\n\n        for await (const chunkBodies of readStreamChunk(\n          streamBodyIterator,\n          boundary,\n        )) {\n          const responseData = getResponseDataFromChunkBodies(chunkBodies);\n\n          responseExtensions =\n            responseData.find((datum) => datum.extensions)?.extensions ??\n            responseExtensions;\n\n          const responseErrors = combineErrors(responseData);\n\n          combinedData = buildCombinedDataObject([\n            combinedData,\n            ...responseData.map(({data}) => data),\n          ]);\n\n          streamHasNext = responseData.slice(-1)[0].hasNext;\n\n          validateResponseData(responseErrors, combinedData);\n\n          yield {\n            ...getKeyValueIfValid('data', combinedData),\n            ...getKeyValueIfValid('extensions', responseExtensions),\n            hasNext: streamHasNext,\n          };\n        }\n\n        if (streamHasNext) {\n          throw new Error(`Response stream terminated unexpectedly`);\n        }\n      } catch (error) {\n        const cause = getErrorCause(error);\n\n        yield {\n          ...getKeyValueIfValid('data', combinedData),\n          ...getKeyValueIfValid('extensions', responseExtensions),\n          errors: {\n            message: formatErrorMessage(getErrorMessage(error)),\n            networkStatusCode: response.status,\n            ...getKeyValueIfValid('graphQLErrors', cause?.graphQLErrors),\n            response,\n          },\n          hasNext: false,\n        };\n      }\n    },\n  };\n}\n\nfunction generateRequestStream(\n  fetchFn: ReturnType<typeof generateFetch>,\n): GraphQLClient['requestStream'] {\n  return async (...props) => {\n    if (!DEFER_OPERATION_REGEX.test(props[0])) {\n      throw new Error(\n        formatErrorMessage(\n          'This operation does not result in a streamable response - use request() instead.',\n        ),\n      );\n    }\n\n    try {\n      const response = await fetchFn(...props);\n\n      const {statusText} = response;\n\n      if (!response.ok) {\n        throw new Error(statusText, {cause: response});\n      }\n\n      const responseContentType = response.headers.get('content-type') || '';\n\n      switch (true) {\n        case responseContentType.includes(CONTENT_TYPES.json):\n          return createJsonResponseAsyncIterator(response);\n        case responseContentType.includes(CONTENT_TYPES.multipart):\n          return createMultipartResponseAsyncInterator(\n            response,\n            responseContentType,\n          );\n        default:\n          throw new Error(\n            `${UNEXPECTED_CONTENT_TYPE_ERROR} ${responseContentType}`,\n            {cause: response},\n          );\n      }\n    } catch (error) {\n      return {\n        async *[Symbol.asyncIterator]() {\n          const response = getErrorCause(error);\n\n          yield {\n            errors: {\n              message: formatErrorMessage(getErrorMessage(error)),\n              ...getKeyValueIfValid('networkStatusCode', response?.status),\n              ...getKeyValueIfValid('response', response),\n            },\n            hasNext: false,\n          };\n        },\n      };\n    }\n  };\n}\n","import { NextRequest, NextResponse } from 'next/server';\nimport { cookies } from 'next/headers';\nimport { shopifyRequest, CUSTOMER_QUERIES } from '@/lib/shopify';\n\n// Register API route\nexport async function POST(request: NextRequest) {\n  try {\n    // Debug logging\n    console.log('Environment check:');\n    console.log('SHOP_DOMAIN:', process.env.NEXT_PUBLIC_SHOPIFY_SHOP_DOMAIN);\n    console.log('STOREFRONT_TOKEN:', process.env.NEXT_PUBLIC_SHOPIFY_STOREFRONT_ACCESS_TOKEN ? 'SET' : 'NOT SET');\n    \n    const { email, password, firstName, lastName, phone, acceptsMarketing } = await request.json();\n\n    if (!email || !password || !firstName || !lastName) {\n      return NextResponse.json(\n        { error: 'Email, password, first name, and last name are required' },\n        { status: 400 }\n      );\n    }\n\n    // Create customer\n    const customerInput: any = {\n      email,\n      password,\n      firstName,\n      lastName,\n      acceptsMarketing: acceptsMarketing || false,\n    };\n    \n    // Only include phone if it's provided and valid\n    if (phone && phone.trim() !== '') {\n      customerInput.phone = phone;\n    }\n    \n    const data = await shopifyRequest(CUSTOMER_QUERIES.customerCreate, {\n      input: customerInput,\n    });\n\n    console.log('Customer Create Response:', JSON.stringify(data, null, 2));\n\n    // Handle GraphQL errors (like rate limiting)\n    if ((data as any).errors?.graphQLErrors?.length > 0) {\n      const error = (data as any).errors.graphQLErrors[0];\n      console.log('GraphQL Error Details:', JSON.stringify(error, null, 2));\n      \n      if (error.extensions?.code === 'THROTTLED') {\n        // Rate limited - customer might have been created, try to log in\n        console.log('Rate limited, attempting login...');\n      } else {\n        return NextResponse.json(\n          { error: `Registration failed: ${error.message}` },\n          { status: 400 }\n        );\n      }\n    }\n\n    // Handle response structure - data is wrapped in a 'data' property\n    const customerCreate = (data as any).data?.customerCreate || (data as any).customerCreate;\n    \n    if (customerCreate?.customerUserErrors?.length > 0) {\n      const error = customerCreate.customerUserErrors[0];\n      return NextResponse.json(\n        { error: error.message },\n        { status: 400 }\n      );\n    }\n\n    // Automatically log in the user after registration\n    const loginData = await shopifyRequest(CUSTOMER_QUERIES.customerAccessTokenCreate, {\n      input: {\n        email,\n        password,\n      },\n    });\n\n    // Handle response structure - data is wrapped in a 'data' property\n    const loginCreate = (loginData as any).data?.customerAccessTokenCreate || (loginData as any).customerAccessTokenCreate;\n    \n    if (loginCreate?.customerUserErrors?.length > 0) {\n      return NextResponse.json(\n        { error: 'Registration successful, but automatic login failed. Please log in manually.' },\n        { status: 200 }\n      );\n    }\n\n    const { accessToken, expiresAt } = loginCreate.customerAccessToken;\n\n    // Get full customer data\n    const customerData = await shopifyRequest(CUSTOMER_QUERIES.customer, {\n      customerAccessToken: accessToken,\n    });\n\n    // Handle response structure - data is wrapped in a 'data' property\n    const customer = (customerData as any).data?.customer || (customerData as any).customer;\n\n    // Set HTTP-only cookie\n    const response = NextResponse.json({\n      success: true,\n      user: customer,\n      redirectTo: '/account', // Redirect to account page after successful registration\n    });\n\n    const cookieStore = await cookies();\n    cookieStore.set('shopify-customer-token', accessToken, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'lax',\n      expires: new Date(expiresAt),\n      path: '/',\n    });\n\n    return response;\n  } catch (error) {\n    console.error('Registration error:', error);\n    return NextResponse.json(\n      { error: 'Registration failed. Please try again.' },\n      { status: 500 }\n    );\n  }\n}\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/auth/register/route\",\n        pathname: \"/api/auth/register\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/src/app/api/auth/register/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/auth/register/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!getRequestMeta(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!getRequestMeta(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(getRequestMeta(req, 'minimalMode') && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,8,9,10,12]}